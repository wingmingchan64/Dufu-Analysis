<?php
/*
  檔案：釋詞.php
  說明：以詞或詞組為單位的最小注釋單位，供資料驅動處理。
*/

$釋詞 = array(
  "〚0003:3.1.1〛" => array(
    "詞" => "岱宗",
    "釋" => "東岳泰山的尊稱，古代五嶽之首。",
  ),
  "〚0003:3.1.2〛" => array(
    "詞" => "夫",
    "釋" => "語氣詞，有感歎、強調之用。",
  ),
  "〚0003:3.1.3-5〛" => array(
    "詞" => "如何",
    "釋" => "怎麼樣，表示疑問或感嘆。",
  ),
  "〚0003:3.2.1-2〛" => array(
    "詞" => "齊魯",
    "釋" => "齊國與魯國，分別位於泰山東西兩側。",
  ),
  "〚0003:3.2.3-5〛" => array(
    "詞" => "青未了",
    "釋" => "青翠的山色無窮無盡。",
  )
);

/*
  檔案：注釋構造.php
  說明：指出各句之注釋來自哪些釋詞，供生成原始注文形式使用。
*/

$注釋構造 = array(
  "〚0003:3.1〛" => array(
    "來自釋詞" => [
      "〚0003:3.1.1〛", 
      "〚0003:3.1.2〛", 
      "〚0003:3.1.3-5〛"
    ]
  ),
  "〚0003:3.2〛" => array(
    "來自釋詞" => [
      "〚0003:3.2.1-2〛", 
      "〚0003:3.2.3-5〛"
    ]
  )
);

/*
  可加上一個簡單函式作為 View 層的接口：
*/

function 合成注釋($句坐標, $釋詞, $注釋構造) {
  if (!isset($注釋構造[$句坐標])) return '';
  $釋列表 = $注釋構造[$句坐標]['來自釋詞'];
  $合成 = [];
  foreach ($釋列表 as $詞坐標) {
    $項 = $釋詞[$詞坐標]['詞'] . '：' . $釋詞[$詞坐標]['釋'];
    $合成[] = $項;
  }
  return implode("\n", $合成);
}

// 範例：
// echo 合成注釋("〚0003:3.1〛", $釋詞, $注釋構造);
