# AI協助之程式設計與文件整理記錄

本記錄整理與記述 ChatGPT 在《杜甫詩歌資料庫》開發過程中所提供的協助，聚焦於 PHP 程式碼的檢視、重構、命名優化、功能補全與文件撰寫，並作爲往後追蹤與延續討論之基礎。

---

## 🧠 上下文記憶要點（使用者提供）

- 資料庫名稱：杜甫詩歌資料庫。
- 技術架構：以 PHP 陣列為資料結構核心，非使用 SQL 資料庫。
- 儲存格式：每一首詩為一 `.php` 或 `.txt` 檔，存放於 GitHub。
- 坐標系統：
  - 每個詩句都有唯一坐標，如：〚0062:1:5〛（表示第 62 首詩，第 1 子詩，第 5 行）。
  - 坐標主要用於連接詩句、註釋、翻譯、版本對照等資料。
- 核心模組集中於 `analysis_programs/` 目錄下，包括：
  - `搜尋程序/`: 詩句查找、比對與結果整合
  - `資料處理/`: 詩文、註釋與版本文本清理與標準化
  - `常數.php`: 定義路徑與全域變數
  - `函式.php`: 公用函式庫（例如坐標轉換、格式標記）
  - `異體字.php`: 字形替換與異體正規化表
- 輔助資料（如詩題、詩組、序文）另存於：
  - `詩組_詩題.php`
  - `帶序文之詩歌.php`
- 註釋來源包括多種版本（如蕭滌非、郭知達、杜甫全詩訳注等），使用統一格式匯入並坐標化。
- 所有輸出皆需標準化字形（例如：壻→婿、閲→閱、即→卽）。
- 系統功能主要透過 CLI + GitHub 管理與自動化處理。

---

## 📂 主題目錄（已完成或計劃審查的模組）

| 模組名稱 | 功能說明 | 討論狀態 |
|----------|----------|-----------|
| `常數.php` | 系統路徑與設定常數定義 | 🔜 待審查 |
| `函式.php` | 所有共用函式集中管理 | 🔜 待審查 |
| `搜尋程序/坐標查詩.php` | 根據坐標顯示詩句、對照多版本 | 🔜 待審查 |
| `資料處理/異體字標準化.php` | 使用異體字對照表清洗詩文與註釋 | ✅ 初步整理 |
| `資料處理/OCR清理表.php` | 清理《杜甫全詩訳注》日文 OCR 輸出之垃圾 | ✅ 使用中 |
| `資料處理/日文轉漢字.php` | 將日文漢字轉爲中文標準字形 | 🔜 計劃製作 |
| `詩組_詩題.php` | 詩組與詩題資料表 | 🔜 待審查 |
| `analysis_programs/匯出/生成完整註釋頁.php` | 匯出整合注釋、翻譯與原文之網頁 | 🔜 待審查 |

---

## 🛠️ 詳細協助記錄

### 📌 異體字標準化表（`異體字.php`）
- 採用 PHP 陣列格式，以 `'異體' => '正字'` 形式儲存。
- 輸入來源：含《杜甫全詩訳注》用字、日本 OCR 常見錯字、簡體轉換、蕭滌非版對照等。
- 功能應用：在清理詩句原文、版本注釋、日譯文時統一字形標準。
- ChatGPT 協助：
  - 建立初版對照表並自動補完常見變體
  - 建議分離不同用途的表格（如 OCR 清理 vs 漢字轉換）

### 📌 OCR 清理表（`OCR清理表.php`）
- 目的：清理從《杜甫全詩訳注》OCR 輸出的假名誤讀與符號錯誤。
- 包含：
  - 假名誤讀（例如：つて→って、つた→った、ぱ→ば）
  - 符號替換（例如："→”、:::"→……）
  - 常見錯誤地名、人名、書名替換
- ChatGPT 協助：
  - 辨識濁音・半濁音轉換誤讀模式
  - 提出「兩階段清理」策略：先清 OCR 垃圾 → 再轉換為中文

---

## 🧭 下一步建議

1. 🧪 撰寫模組測試函式：協助偵測輸出異常（如坐標錯配、重複鍵）
2. 📄 製作每個模組的標準文件註解範例（docblock）
3. 🔍 搜尋優化：引入全文字典匹配、注釋索引反查功能
4. 📊 分析器：統計每首詩的版本異文、註釋來源頻率等
5. 📦 將各類常用對照表模組化，便於後期維護

---

## 🧠 上下文記憶要點（此部分爲陳永明所加）

1. 我的教育背景：中文系學士、電腦科學碩士、語言學博士


---

📌 **備註**：此記錄將持續更新，並隨每次程式審查與協助結果擴展。請於新對話中指定模組名稱與 GitHub 連結，我們將逐一處理。

Text to be put on the top of a new discussion:
🧠 [Load context] Please refer to AI貢獻記錄（ChatGPT）/AI協助之程式設計與文件整理記錄.md on GitHub for full context. We are now continuing the Du Fu database programming audit and documentation.
https://github.com/wingmingchan64/Dufu-Analysis/tree/main/AI%E8%B2%A2%E7%8D%BB%E8%A8%98%E9%8C%84%EF%BC%88ChatGPT%EF%BC%89
